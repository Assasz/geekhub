{% extends 'layout/default.html.twig' %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
  <div class="panel panel-default">
    <div class="panel-heading">
      <h2 class="panel-title">{{ post.title }}</h2>
    </div>
    <div class="panel-body">
      <p>{{ post.content|raw }}</p>
    </div>
  </div>

  {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
    {{ render(controller('AppBundle:Comment:create', {'post': post})) }}
  {% else %}
    <div class="panel panel-default">
      <p>Sign in to add comment</p>
    </div>
  {% endif %}

  {{ render(controller('AppBundle:Comment:list', {'request': app.request, 'post': post})) }}
{% endblock %}
